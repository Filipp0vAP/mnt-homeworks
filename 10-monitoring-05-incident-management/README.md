# Домашнее задание к занятию "10.06 Инцидент-менеджмент"

## Основная часть

Составьте постмортем на основе реального сбоя системы GitHub в 2018 году.

Информация о сбое: 

* [в виде краткой выжимки на русском языке](https://habr.com/ru/post/427301/);
* [развёрнуто на английском языке](https://github.blog/2018-10-30-oct21-post-incident-analysis/).


---

## Ответ

| Раздел|Описание|
|:-|:-|
| **Описание**          | Нарушение работы некоторых сервисов GitHub, в связи с чем пользователи видели старую информацию, не работали вебхуки, сборки и публикации на GitHub Pages| 
| **Предшествовавшее**  | Плановые работы по замене сетевого оборудования, в связи с чем была потеря связи c восточным дата центром на 43 секунды |
| **Причина**           | Из-за сбоя начался выбор ного лидера БД кластера, после выбора лидера в западном дата центре туда сразу же начался процесс записи новыйх данный, но восточный дата центр содержал некоторое колличество данных, которые он не успел реплецировать на запад и после восстановления соединения кластер оказался в несогласованном состоянии|
| **Воздействие**       | В течение 24 часов и 11 минут пользователи видели старую информацию, не работали вебхуки, сборки и публикации на GitHub Pages. В сумме в очереди стояли 5 миллионов веб хуков и 80 тысяч сборок|
| **Обнаружение**       | Сработала система мониторинга, оповестила дежурных инженеров, которые зарегестировали инцедент|
| **Реакция**           | Дежурные инженеры отреагировали на инцидент и отключили репликацию, что бы не допустить дальнейшую деградацию данных. Так же были подключены дополнительные инженеры и координатор инцидента, который повысил уровень инцидента до максимального|
| **Восстановление**    | В целях сохранения всех данных пользователей, было решено остановить работу вебхуков и сборок на время приведения кластера в согласованное состояние|
| **Таймлайн**          | 2018-10-21 22:52 Остановка строя сетевого оборудования инициировал процесс назначения нового лидера кластера;<br/>2018-10-21 22:54 Система внутреннего мониторинга сигнализирует о множественных ошибках;<br/>2018-10-21 23:02 Дежурные инженеры обнаруживают несогласованность топологии кластеров БД;<br/>2018-10-21 23:07 Во избежание дальнейшего распространения несогласованности дежурная команда вручную блокирует репликацию;<br/>2018-10-21 23:11 К решению проблемы присоединяется координатор инцидента;<br/>2018-10-21 23:13 Координатор инцидента принимает решение повысить статус инцидента до красного уровня. Дежурные инженеры начинают расследование;<br/>2018-10-21 23:19 Степень деградации системы вынуждает команду остановить процессы записи данных, сделав выбор в пользу сохранения данных в ущерб функциональности. Работа вебхуков и билдов остановлена;<br/>2018-10-22 00:05 Инженеры начинают разрабатывать план восстановления системы. Пользователи информируются о том, что часть функционала будет остановлена;<br/>2018-10-22 00:41 Начат процесс бэкапа. Команды инженеров работают над планом скорейшего восстановления системы без риска её деградации;<br/>2018-10-22 06:51 Ряд кластеров завершают восстановление, что приводит к замедлению загрузки некоторых страниц, но информация на них начинает отображаться корректно. Кластеры крупных БД всё еще в процессе восстановления;<br/>2018-10-22 07:46 GitHub публикует пост с объяснениями;<br/>2018-10-22 11:12 Часть БД восстановлена, что приводит к ускорению работы ряда сервисов, но часть кластеров всё еще не реплицировалась;<br/>2018-10-22 13:15 GitHub сталкивается эффектом пикового отложенного траффика;<br/>2018-10-22 16:24 Реплики синхронизированы, что позволяет запустить процесс восстановления топологии серверов и резервирования данных, накопленных за время простоя. Статус сервисов всё еще "красный";<br/>2018-10-22 16:45 Вся экосистема находится в состоянии повышенной нагрузки и необходимости перебалансировки;<br/>2018-10-22 23:03 Целостность системы восстановлена, все отложенные события выполнены, статус возвращен в "зеленый". |
| **Предпринятые меры** | Изменение процедуры оркестрации, чтобы выбор лидера с одновременным выходом из строя систем связи не приводил к рассогласованности кластеров между регионами;<br/>Начали использовать система статусов для разных компоненов системы, вместо статуса всей системы в целом;<br/>Увеличена колличества датацентров;<br/>Начали практиковать проверку сценариев сбоев до того как они повлияют на пользователей
                                     
---

### Как оформить решение задания

Выполненное домашнее задание пришлите в виде ссылки на .md-файл в вашем репозитории.

---
